<div class="bg-white rounded p-3 shadow-sm">
  <div class="flex justify-between items-baseline flex-wrap gap-3">
    <h2 class="text-2xl my-3 text-secondary font-bold">
      {{ "الطلبات " + " (" + allOrders.length + ")" }}
    </h2>
    <h3 class="text-xl text-secondary font-bold p-1 rounded">
      الاجمالي: {{ total }} جنيه
    </h3>
  </div>

  <div class="flex justify-center gap-[2rem]">
    <div class="flex flex-wrap gap-2 items-center">
      <div>
        <span class="font-bold text-roseDark-100">من </span>
        <select
          class="rounded bg-beige w-[120px] px-3 py-2 border-2 border-cream text-roseDark-100 focus:bg-beige focus:outline-none"
          name="time"
          id="time"
          [(ngModel)]="selectedTime"
          (change)="onTimeChange()"
        >
          @for (item of timeArr; track $index) {
          <option class="hover:bg-roseLight1 bg-beige" [value]="item.value">
            {{ item.text }}
          </option>
          }
        </select>
      </div>

      @if (showSelectDate) {
      <div>
        <!-- select date -->
        <app-date-picker
          (dateChanged)="onDateChanged($event)"
        ></app-date-picker>
        <p class="font-bold text-roseDark-100">يوم : {{ selectedDate }}</p>
      </div>
      }
    </div>

    <div>
      <span class="font-bold text-roseDark-100">الترتيب </span>

      <select
        class="rounded w-[120px] px-3 py-2 border-2 bg-beige border-cream text-roseDark-100"
        name="time"
        id="time"
        [(ngModel)]="selectedOrder"
        (change)="onOrderChange()"
      >
        <option class="hover:bg-roseLight1" value="new">الأحدث</option>
        <option class="hover:bg-roseLight1" value="old">الأقدم</option>
      </select>
    </div>
  </div>

  <div class="flex flex-wrap gap-2 items-center my-2 justify-between">
    <div class="flex flex-wrap gap-2 items-center my-2">
      <p>ابحث بأسم العميل :</p>
      <input
        type="search"
        name="searchOrderTracking"
        id="searchOrderTracking"
        (input)="searchByCustomerName($event)"
        #customerNameInput
        class="border rounded-xl shadow-sm p-1 m-2 dark:bg-neutral-800 dark:border-neutral-700"
        placeholder="ابحث"
      />
    </div>
    <button
      class="p-2 bg-green-500 text-white rounded"
      (click)="exportOrdersToCSV()"
    >
      export Orders To CSV
    </button>
  </div>

  <div class="w-full my-4 bg-white rounded-lg shadow-md dark:bg-neutral-800">
    <div class="hs-accordion-group">
      <div class="hs-accordion active" id="hs-basic-heading-one">
        <button
          class="hs-accordion-toggle hs-accordion-active:text-secondary px-6 py-3 inline-flex items-center gap-x-3 text-sm w-full font-semibold text-start text-roseDark-100 hover:text-roseMedium2 focus:outline-none focus:text-roseMedium2 rounded-lg disabled:opacity-50 disabled:pointer-events-none dark:hs-accordion-active:text-blue-500 dark:text-neutral-200 dark:hover:text-neutral-400 dark:focus:text-neutral-400"
          aria-expanded="true"
          aria-controls="hs-basic-collapse-one"
        >
          <svg
            class="hs-accordion-active:hidden hs-accordion-active:text-secondary hs-accordion-active:group-hover:text-secondary block size-4 text-roseDark-100 group-hover:text-roseMedium2 dark:text-neutral-400"
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M5 12h14"></path>
            <path d="M12 5v14"></path>
          </svg>
          <svg
            class="hs-accordion-active:block hs-accordion-active:text-secondary hs-accordion-active:group-hover:text-secondary hidden size-4 text-roseDark-100 group-hover:text-roseMedium2 dark:text-neutral-400"
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M5 12h14"></path>
          </svg>
          الكميات
        </button>
        <div
          id="hs-basic-collapse-one"
          class="hs-accordion-content w-full overflow-hidden transition-[height] duration-300"
          role="region"
          aria-labelledby="hs-basic-heading-one"
        >
          <div class="pb-4 px-6">
            @if((allQuantities|keyvalue).length >0){ @for (item of allQuantities
            | keyvalue; track $index) {
            <div
              class="bg-beige rounded py-1 px-2 my-2 flex items-center shadow-sm"
            >
              <span class="text-roseDark-100 font-medium w-36 inline-block">{{
                item.key
              }}</span>
              <span class="text-roseMedium2 font-bold">{{ item.value }}</span>
            </div>
            } }@else {
            <div class="flex flex-col justify-center items-center">
              <svg class="icon icon-illustration-empty-cart mt-4">
                <use xlink:href="#icon-illustration-empty-cart"></use>
              </svg>
              <h3 class="text-center text-3xl p-2">لا يوجد كميات</h3>
            </div>

            }
          </div>
        </div>
      </div>

      <div class="hs-accordion" id="hs-basic-heading-two">
        <button
          class="hs-accordion-toggle hs-accordion-active:text-secondary px-6 py-3 inline-flex items-center gap-x-3 text-sm w-full font-semibold text-start text-roseDark-100 hover:text-roseMedium2 focus:outline-none focus:text-roseMedium2 rounded-lg disabled:opacity-50 disabled:pointer-events-none"
          aria-expanded="false"
          aria-controls="hs-basic-collapse-two"
        >
          <svg
            class="hs-accordion-active:hidden hs-accordion-active:text-secondary hs-accordion-active:group-hover:text-secondary block size-4 text-roseDark-100 group-hover:text-roseMedium2 dark:text-neutral-400"
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M5 12h14"></path>
            <path d="M12 5v14"></path>
          </svg>
          <svg
            class="hs-accordion-active:block hs-accordion-active:text-secondary hs-accordion-active:group-hover:text-secondary hidden size-4 text-roseDark-100 group-hover:text-secondary"
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M5 12h14"></path>
          </svg>
          الطلبات
        </button>
        <div
          id="hs-basic-collapse-two"
          class="hs-accordion-content hidden w-full overflow-hidden transition-[height] duration-300"
          role="region"
          aria-labelledby="hs-basic-heading-two"
        >
          <app-orders-wrapper [allOrders]="allOrders" [filteredOrders]="filteredOrders"></app-orders-wrapper>
        </div>
      </div>
    </div>
  </div>
</div>

<svg class="hidden">
  <symbol id="icon-illustration-empty-cart" viewBox="0 0 32 32">
    <path
      fill="#260f08"
      style="fill: var(--color1, #260f08)"
      opacity="0.15"
      d="M2.109 27.602c0 0.265 1.159 0.52 3.222 0.707s4.861 0.293 7.778 0.293c2.917 0 5.715-0.105 7.778-0.293s3.222-0.442 3.222-0.707-1.159-0.52-3.222-0.707c-2.063-0.188-4.861-0.293-7.778-0.293s-5.715 0.105-7.778 0.293c-2.063 0.188-3.222 0.442-3.222 0.707z"
    ></path>
    <path
      fill="#87635a"
      style="fill: var(--color2, #87635a)"
      d="M29.996 6.055l-11.787 1.44 1.080 8.84 11.193-1.367c0.243-0.029 0.439-0.202 0.503-0.429l0.001-0.004c0.021-0.076 0.026-0.155 0.016-0.233l-1.006-8.246z"
    ></path>
    <path
      fill="#ad8a85"
      style="fill: var(--color3, #ad8a85)"
      d="M18.64 11.036l11.787-1.438 0.359 2.944-11.785 1.44-0.36-2.945z"
    ></path>
    <path
      fill="#caafa7"
      style="fill: var(--color4, #caafa7)"
      d="M21.409 9.195c-0.042-0.294-0.292-0.518-0.594-0.518-0.026 0-0.051 0.002-0.075 0.005l0.003-0c-0.294 0.039-0.518 0.288-0.518 0.589 0 0.027 0.002 0.054 0.005 0.081l-0-0.003 0.073 0.587c0 0.010 0.001 0.021 0.001 0.032 0 0.493-0.4 0.893-0.893 0.893-0.427 0-0.784-0.3-0.872-0.7l-0.001-0.006-0.327-2.667 3.62-4.22c4.813-0.173 8.533 0.9 8.753 2.7l0.32 2.633c0.001 0.011 0.002 0.024 0.002 0.037 0 0.162-0.131 0.293-0.293 0.293-0.015 0-0.030-0.001-0.044-0.003l0.002 0c-0.503-0.098-0.886-0.507-0.946-1.014l-0.001-0.006c-0.038-0.295-0.288-0.521-0.59-0.521-0.328 0-0.595 0.266-0.595 0.595 0 0.026 0.002 0.051 0.005 0.076l-0-0.003 0.073 0.587c0.003 0.022 0.004 0.047 0.004 0.073 0 0.139-0.047 0.266-0.126 0.367l0.001-0.001c-0.095 0.121-0.234 0.204-0.393 0.224l-0.003 0c-0.022 0.003-0.047 0.005-0.073 0.005-0.138 0-0.266-0.047-0.367-0.126l0.001 0.001c-0.121-0.095-0.204-0.234-0.224-0.393l-0-0.003c-0.029-0.241-0.199-0.436-0.425-0.501l-0.004-0.001c-0.048-0.014-0.104-0.022-0.161-0.022-0.189 0-0.357 0.088-0.466 0.225l-0.001 0.001c-0.079 0.1-0.127 0.228-0.127 0.367 0 0.025 0.002 0.049 0.004 0.073l-0-0.003 0.073 0.593c0.006 0.043 0.009 0.094 0.009 0.144 0 0.656-0.532 1.188-1.188 1.188-0.278 0-0.534-0.095-0.736-0.255l0.003 0.002c-0.242-0.191-0.407-0.469-0.446-0.787l-0.001-0.006-0.107-0.887c-0.035-0.294-0.282-0.519-0.583-0.519-0.030 0-0.059 0.002-0.087 0.006l0.003-0c-0.297 0.039-0.524 0.291-0.524 0.595 0 0.025 0.002 0.050 0.005 0.074l-0-0.003 0.040 0.293c0.003 0.022 0.005 0.047 0.005 0.073 0 0.328-0.266 0.595-0.595 0.595-0.302 0-0.552-0.226-0.59-0.518l-0-0.003-0.027-0.32z"
    ></path>
    <path
      fill="#87635a"
      style="fill: var(--color2, #87635a)"
      d="M1.863 12.948c-0.24 2.12 4.186 4.36 9.867 4.987s10.52-0.54 10.76-2.667l-0.987 8.873c-0.24 2.12-5.060 3.334-10.76 2.667s-10.127-2.873-9.886-5.013l1.006-8.847z"
    ></path>
    <path
      fill="#ad8a85"
      style="fill: var(--color3, #ad8a85)"
      d="M1.456 16.488c-0.24 2.113 4.186 4.36 9.893 5.007s10.513-0.547 10.753-2.667l-0.333 2.947c-0.24 2.12-5.060 3.333-10.76 2.666s-10.127-2.887-9.886-5.006l0.333-2.947z"
    ></path>
    <path
      fill="#caafa7"
      style="fill: var(--color4, #caafa7)"
      d="M15.209 10.695c-0.673-0.147-1.554-0.29-2.447-0.394l-0.14-0.013c-6-0.667-11.113 0.473-11.333 2.593l-0.533 4.72c-0.005 0.034-0.007 0.074-0.007 0.114 0 0.491 0.398 0.889 0.889 0.889 0.461 0 0.839-0.35 0.884-0.799l0-0.004c0.030-0.469 0.418-0.838 0.892-0.838 0.493 0 0.894 0.4 0.894 0.893 0 0.051-0.004 0.101-0.013 0.15l0.001-0.005-0.2 1.773c-0.006 0.050-0.009 0.108-0.009 0.167 0 0.819 0.664 1.483 1.483 1.483 0.76 0 1.387-0.572 1.473-1.309l0.001-0.007c0.052-0.446 0.428-0.789 0.883-0.789 0.491 0 0.889 0.398 0.889 0.889 0 0.035-0.002 0.070-0.006 0.104l0-0.004-0.067 0.587c-0.002 0.022-0.003 0.047-0.003 0.073 0 0.493 0.4 0.893 0.893 0.893 0.446 0 0.816-0.327 0.883-0.755l0.001-0.005 0.033-0.3c0.088-0.743 0.714-1.313 1.473-1.313 0.819 0 1.483 0.664 1.483 1.483 0 0.060-0.004 0.119-0.010 0.177l0.001-0.007-0.1 0.88c-0.002 0.021-0.003 0.046-0.003 0.070 0 0.493 0.4 0.893 0.893 0.893 0.445 0 0.814-0.326 0.882-0.752l0.001-0.005 0.233-2.067c0.030-0.132 0.147-0.229 0.286-0.229 0.014 0 0.028 0.001 0.042 0.003l-0.002-0c0.148 0.013 0.263 0.136 0.263 0.286 0 0.014-0.001 0.029-0.003 0.043l0-0.002c-0.003 0.036-0.005 0.078-0.005 0.12 0 0.821 0.666 1.487 1.487 1.487 0.746 0 1.363-0.549 1.47-1.265l0.001-0.008 0.134-1.18c0.058-0.44 0.431-0.775 0.882-0.775 0.491 0 0.889 0.398 0.889 0.889 0 0.030-0.002 0.060-0.005 0.090l0-0.004c-0.002 0.022-0.003 0.047-0.003 0.073 0 0.493 0.4 0.893 0.893 0.893 0.446 0 0.816-0.327 0.883-0.755l0.001-0.005 0.447-3.886c0.003-0.023 0.005-0.050 0.005-0.077 0-0.304-0.228-0.554-0.522-0.589l-0.003-0-11.507-1.333 4.173-3.24z"
    ></path>
    <path
      fill="#87635a"
      style="fill: var(--color2, #87635a)"
      d="M14.789 14.415l0.42-3.72-4.207 3.293 3.787 0.427z"
    ></path>
  </symbol>
</svg>
